/*account.youku.com 2016-04-28 by x */
var YTL_CONFIG=window.YTL_CONFIG||{};YTL_CONFIG={preDomain:"https://",homePage:"http://www.youku.com",jsonpTimeout:5e3,emailReg:/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]{1,4}$/,numberReg:/^\d+$/,codeReg:/^[A-Za-z]+$/,specialReg:/^\W+$/,chineseCharReg:/[^\x00-\xff]/,psdtest:/^[a-zA-Z\d~!@#\$%\^&\*\(\)\[\]\{\}\|;:'\"\?.,]{6,16}$/,allMobileRegExp:{CN:"^1[3,4,5,7,8]\\d{9}$",US:"^\\d{10}$",CA:"^\\d{10}$",KR:"^1\\d{8}$",AU:"^\\d{9}$",JP:"^\\d{10}$",SG:"^[8|9]\\d{7}$",MY:"^\\d{9}$",NZ:"^2\\d{7,9}$",PH:"^9\\d{9}$",VN:"^9\\d{8}$",AE:"^5\\d{8}$",PK:"^3\\d{9}$",HK:"^[6|9]\\d{7}$",MO:"^6\\d{7}$",TW:"^9\\d{8}$",FR:"^6\\d{8}$",DE:"^[0|1]\\d{9}$",GB:"^7\\d{9}$",IT:"^3\\d{9}$"},blurLockTime:300},function(a,b){function c(b){var c={callbackURL:"",template:"tempA",themes:["fe526e","ffbec9"],bgThemes:"#fff",fontColor:"#333",linkColor:"#333",mode:"popup",frameID:"",from:"",loginModel:["normal","mobile"],regModel:["email","mobile"],regShowType:"in",regRules:["\u7528\u6237\u534f\u8bae","http://mapp.youku.com/service/agreement","http://mapp.youku.com/service/copyright"],changePsdLink:"http://www.youku.com/user_getPwd/",checkNoLogin:function(){},loginSuccess:function(){},closeCallback:function(){},isQRlogin:!0,isThirdPartLogin:!0,qrMsg:"\u8bf7\u4f7f\u7528\u4f18\u9177APP\u626b\u7801\u767b\u5f55",qrBu:["ykt",80,"false"],size:"normal",placeholders:{login:{account:"\u624b\u673a/\u90ae\u7bb1/\u4f18\u9177\u571f\u8c46\u8d26\u53f7",password:"\u767b\u5f55\u5bc6\u7801"},reg:{emailReg:{account:"\u90ae\u7bb1\u5730\u5740",password:"\u5bc6\u7801(6-16\u4f4d\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u7b26\u53f7)",repeatPassword:"\u786e\u8ba4\u5bc6\u7801",mobile:"\u624b\u673a\u53f7\u7801\uff08\u53ef\u7528\u4e8e\u627e\u56de\u5bc6\u7801\uff09"},mobileReg:{account:"\u624b\u673a\u53f7\u7801",password:"\u5bc6\u7801(6-16\u4f4d\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u7b26\u53f7)",repeatPassword:"\u786e\u8ba4\u5bc6\u7801",validate:"\u9a8c\u8bc1\u7801"}}},errorTips:{account:{required:"\u8bf7\u8f93\u5165\u8d26\u53f7",valid_mobile:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801",reg_email:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740",valid_email:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u5730\u5740",notExist:"\u8d26\u53f7\u4e0d\u5b58\u5728",exist:'\u8d26\u53f7\u5df2\u5b58\u5728\uff0c\u8bf7\u76f4\u63a5<a href="javascript:;" class="YT-existToLogin" id="YT-existToLogin">\u767b\u5f55</a>',check_passport:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7ed1\u5b9a\u8d26\u53f7",not_exist_mobile:'\u8be5\u624b\u673a\u53f7\u672a\u6ce8\u518c\uff0c\u53ef\u4f7f\u7528<a href="javascript:;" class="YT-existToLogin" id="YT-toMLogin">\u77ed\u4fe1\u767b\u5f55</a>'},password:{required:"\u8bf7\u8f93\u5165\u5bc6\u7801",min_length:"\u5bc6\u7801\u4f4d\u6570\u5fc5\u987b\u57286-16\u4f4d\u4e4b\u95f4",max_Length:"\u5bc6\u7801\u4f4d\u6570\u5fc5\u987b\u57286-16\u4f4d\u4e4b\u95f4",valid_psdStrong:"\u5bc6\u7801\u5fc5\u987b\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u7b26\u53f7\u7ec4\u6210",valid_psd_n_s_spe:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7eaf\u6570\u5b57\u3001\u7eaf\u5b57\u6bcd\u6216\u7eaf\u5b57\u7b26",cant_matches:"\u5bc6\u7801\u4e0d\u80fd\u548c\u767b\u5f55\u540d\u76f8\u540c",is_psd_sick:"\u8be5\u5bc6\u7801\u5b89\u5168\u6027\u8f83\u4f4e\uff0c\u8bf7\u8bbe\u7f6e\u66f4\u590d\u6742\u5bc6\u7801",cant_matchesEmail:"\u5bc6\u7801\u4e0d\u80fd\u548c\u90ae\u7bb1\u524d\u7f00\u76f8\u540c"},mobile:{required:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801",valid_mobile:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801"},repeatPassword:{required:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801",matches:"\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4"},validate:{required:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"},smsCode:{noGet:"\u8bf7\u5148\u83b7\u53d6\u624b\u673a\u9a8c\u8bc1\u7801",smsPsd:"\u8bf7\u8f93\u5165\u52a8\u6001\u5bc6\u7801"},captcha:{required:"\u8bf7\u8f93\u5165\u56fe\u7247\u9a8c\u8bc1\u7801",error:"\u56fe\u7247\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e"},errorCode:{defaults:"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",MOBILE_CODE_ERROR:"\u624b\u673a\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",system_error:"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",NEED_CAPTCHA:"\u9700\u8981\u9a8c\u8bc1\u7801",CAPTCHA_ERROR:"\u56fe\u7247\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e",CAPTCHA_TIMEOUT:"\u56fe\u7247\u9a8c\u8bc1\u7801\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",timeout:"\u8bf7\u6c42\u8d85\u65f6\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5",loginTimeout:"\u767b\u5f55\u8d85\u65f6\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5",regTimeout:"\u6ce8\u518c\u8d85\u65f6\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5"}}},d=c.themes;this.config=j(!0,c,b),this.config.qrBu=this.config.qrBu instanceof Array?this.config.qrBu:["ykt",80,"false"],Fa=this.config.loginSuccess,this.config.loginModel&&this.config.loginModel instanceof Array||(this.config.loginModel=["normal","mobile"]),this.config.regModel&&this.config.regModel instanceof Array||(this.config.regModel=["email","mobile"]),oa="normal"==this.config.loginModel[0]?"normal":"mobile",na="email"==this.config.regModel[0]?"email":"mobile",va=this.config.themes,ha=this.config.mode;var e=new RegExp("^[0-9a-fA-F]{6}$");va[0]?e.test(va[0])&&e.test(va[1])||(va=d):va=d,ea=C(),da="",y(ga,ea)?(da=fa+ea,this.init()):this.config.callbackURL&&(a.location.href=this.config.callbackURL)}function d(a){wa={},ra=!1,pa=!0;var b=a.tuid,d=a.buid,e=a.pid,f=a.tlsite,g=a.formtoken,h="",i="",j="",m={},n=document.createElement("div");switch(la="login",oa="normal",ua=!0,n.id="YT-thirdLoginBox",O(n,"YT-third-loginbox"),a.tlsite){case"taobao":h="\u6dd8\u5b9d";break;case"qq":h="QQ";break;case"wechat":h="\u5fae\u4fe1";break;case"alipay":h="\u652f\u4ed8\u5b9d";break;case"weibo":h="\u65b0\u6d6a\u5fae\u535a";break;case"txweibo":h="\u817e\u8baf\u5fae\u535a";break;case"renren":h="\u4eba\u4eba\u7f51";break;case"kaixin":h="\u5f00\u5fc3\u7f51";break;default:h="\u7b2c\u4e09\u65b9"}a.callback&&""!=a.callback&&(i='<input type="hidden" hidden name="YT-l_callback" id="YT-l_callback" value="'+a.callback+'">'),j='<div class="YT-thirdbox-wrap"><div class="YT-thirdbox-head">'+i+'<div id="YT-thirdboxClose" class="YT-thirdbox-close" title="\u5173\u95ed"></div><div class="YT-third-header"><img src="'+a.header+'" width="60" height="60" alt=""></div><span class="YT-third-userinfo">\u60a8\u5df2\u767b\u5f55\u7684'+h+"\u8d26\u53f7 \u6635\u79f0\uff1a"+a.nickName+'</span></div><div class="YT-thirdbox-body"><div class="YT-thirdbox-left"><p class="YT-top-title">\u5df2\u6709\u4f18\u9177\u571f\u8c46\u8d26\u53f7\uff1f</p><div class="YT-tips-box"><div id="YT-errorTips" style="display:none;"></div></div><form class="YT-form YT-bind-form mini" action="#" name="YT-bindForm" id="YT-bindForm" method="post"><input type="hidden" value="'+a.formtoken+'" hidden id="YT-formtoken" name="YT-formtoken"><div class="YT-form-group first-group"><label class="YT-form-label" for="YT-bindAccount"><span class="YT-form-tips">\u624b\u673a/\u90ae\u7bb1/\u4f18\u9177\u571f\u8c46\u8d26\u53f7</span> <span class="YT-m-icon icon-user">&#xe61f;</span></label><input type="text" id="YT-bindAccount" name="YT-bindAccount" tabindex="1" class="YT-form-input account-input"></div><div class="YT-form-group"><label class="YT-form-label" for="YT-bindPassword"><span class="YT-form-tips">\u767b\u5f55\u5bc6\u7801</span> <span class="YT-m-icon icon-password">&#xe620;</span></label><input type="password" id="YT-bindPassword" maxLength="16" name="YT-bindPassword" tabindex="2" class="YT-form-input"></div><div id="YT-thirdCaptchaWrap" class="YT-captcha-wrap"></div><div class="YT-form-group"><button type="submit" id="YT-bindSubmit" class="YT-form-btn">\u767b\u5f55\u5e76\u7ed1\u5b9a</button></div><div class="YT-form-group" style="margin-top:10px;"><div class="YT-ember"><a href="http://www.youku.com/user_getPwd/" target="_blank" class="forget-psd">\u5fd8\u8bb0\u5bc6\u7801\uff1f</a></div></div></form></div><div class="YT-thirdbox-right"><p class="YT-top-title">\u6ca1\u6709\u4f18\u9177\u571f\u8c46\u8d26\u53f7\uff1f</p><div class="YT-form-group" style="margin-top:30px"><button id="YT-noBindSubmit" class="YT-no-bing-submit">\u76f4\u63a5\u767b\u5f55</button></div></div></div></div>',N(n,j),c.prototype.showPopWindow(n),l(z("YT-thirdboxClose"),"click",function(){if(ua=!1,c.prototype.clearPopWindow(),ha&&"embedded"==ha){var a=document.createElement("div");a.id="YT-errorTips",O(a,"YT-errtips-box"),a.style.display="none";var b=z("YT-loginFrameTitle").parentNode;b.appendChild(a)}}),O(z("YT-errorTips"),"YT-errtips-box"),setTimeout(function(){o("YT-thirdLoginBox")},100),m.canSubmit=!0,l(z("YT-bindAccount"),"blur",function(){var a=A(z("YT-bindAccount"));if(!t(a))return N(z("YT-errorTips"),""),void K("YT-errorTips");if(""!=a||a){if("string"==k(a))return m.typeOk=0,N(z("YT-errorTips"),"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7ed1\u5b9a\u8d26\u53f7"),J("YT-errorTips"),!1;m.typeOk=1}1==m.typeOk&&x({url:ca+"/passport/isUserExist.json",dataType:"jsonp",data:{buid:d,pid:e,passport:a,formtoken:g,bizType:"login"},success:function(a){if("success"==a.result)if(N(z("YT-errorTips"),""),K("YT-errorTips"),m.canSubmit=!0,a.msg.exist){if(m.isExist=1,a.msg.needCaptcha)return void c.prototype.createCaptcha("","","","login",3);c.prototype.delCaptcha()}else N(z("YT-errorTips"),"\u8d26\u53f7\u4e0d\u5b58\u5728"),J("YT-errorTips"),m.isExist=0;else m.canSubmit=!1,"NEED_CAPTCHA"==a.errorCode||"CAPTCHA_CODE_NULL"==a.errorCode||"CAPTCHA_KEY_NULL"==a.errorCode?(ra=!0,pa=!1,c.prototype.createCaptcha("","","","login",3)):"CAPTCHA_TIMEOUT"==a.errorCode?(J("YT-errorTips"),pa=!1,c.prototype.changeCaptcha("login",d,e)):a.errorMsg&&""!=a.errorMsg?(N(z("YT-errorTips"),a.errorMsg),J("YT-errorTips")):(N(z("YT-errorTips"),"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),J("YT-errorTips"))}})});var p=!0;l(z("YT-bindSubmit"),"click",function(){if(l(z("YT-bindForm"),"submit",function(){return!1}),p){var a=new FormValidator("YT-bindForm",[{name:"YT-bindAccount",rules:"required|!callback_check_passport",errorMsg:{required:"\u8bf7\u8f93\u5165\u7ed1\u5b9a\u8d26\u53f7",check_passport:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7ed1\u5b9a\u8d26\u53f7"}},{name:"YT-bindPassword",rules:"required",errorMsg:{required:"\u8bf7\u8f93\u5165\u5bc6\u7801"}}],function(a,i){var j=z("YT-errorTips");if(a.length>0)N(j,a[0].message),J("YT-errorTips");else{N(j,""),K("YT-errorTips");var k={};if(m.typeOk&&0==m.typeOk)return N(z("YT-errorTips"),"\u8d26\u53f7\u7c7b\u578b\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"),J("YT-errorTips"),!1;if(m.isExist&&0==m.isExist)return N(z("YT-errorTips"),"\u8d26\u53f7\u4e0d\u5b58\u5728"),J("YT-errorTips"),!1;if(ra){if(!pa)return N(z("YT-errorTips"),"\u56fe\u7247\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e"),J("YT-errorTips"),!1;k.captcha=A(z("YT-captcha"))}p=!1,k.buid=d,k.pid=e,k.tuid=b,k.passport=A(z("YT-bindAccount")),k.password=Q(A(z("YT-bindPassword"))),k.tlsite=f,k.isLoginDirect=!1,k.formtoken=g,x({url:ca+"/thirdparty/bind.json",data:k,dataType:"jsonp",success:function(a){"success"==a.result?c.prototype.mainLoginSuccess(a,d,e,"tempA"):(p=!0,ra&&(pa=!1,c.prototype.changeCaptcha("login",d,e)),"NEED_CAPTCHA"==a.errorCode||"CAPTCHA_CODE_NULL"==a.errorCode||"CAPTCHA_KEY_NULL"==a.errorCode?c.prototype.createCaptcha(d,e,"","login",3):"CAPTCHA_ERROR"==a.errorCode?ra?(pa=!1,N(j,"\u56fe\u7247\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e"),J("YT-errorTips")):(ra=!0,pa=!1,c.prototype.createCaptcha("","","","login",3)):"USER_ALREADY_BIND"==a.errorCode?(N(j,"\u8be5\u8d26\u53f7\u5df2\u7ed1\u5b9a\u8fc7\u5176\u4ed6"+h+"\u8d26\u53f7"),J("YT-errorTips")):(N(j,a.errorMsg),J("YT-errorTips")))}})}});a.registerCallback("check_passport",function(a){return"string"==k(a)?!1:!0}).setMessage("check_passport","\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7ed1\u5b9a\u8d26\u53f7"),setTimeout(function(){ra&&a._addField({name:"YT-captcha",rules:"required",errorMsg:{required:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"}},"YT-captcha"),m.canSubmit&&a._validateForm()},250)}});var q=!0;l(z("YT-noBindSubmit"),"click",function(){q&&(q=!1,G(z("YT-noBindSubmit"),"disabled"),x({url:ca+"/thirdparty/bind.json",data:{buid:d,pid:e,tuid:b,isLoginDirect:!0,tlsite:f,formtoken:g},dataType:"jsonp",success:function(a){"success"==a.result?c.prototype.mainLoginSuccess(a,d,e,"tempA"):(q=!0,F(z("YT-noBindSubmit"),"disabled"),alert("\u76f4\u63a5\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"))}}))})}function e(b){if(z("YT-thirdList")){var c,d=z("YT-thirdList").getElementsByTagName("span");c=d.length>5?d.length-2:d.length;for(var e=0,f=c;f>e;e++)!function(c){var e=d[c],f=e.getAttribute("data-link"),g=f+"&domain="+C()+"&protocol="+a.location.protocol;l(e,"click",function(){document.domain=C(),"tempMobile"==b?a.location.href=g:newWin=a.open(g,"thirdPartLoginWindow","height=600,width=1000,top=0,left=0,toolbar=no,menubar=no,scrollbars=auto,resizable=yes,location=no,status=no")})}(e);l(z("YT-showAllThirdPart"),"click",function(){var a=z("YT-thirdList").getElementsByTagName("span");if(a.length>4)for(var b=0,c=a.length;c>b;b++)F(a[b],"hide");K("YT-showAllThirdPart"),I("YT-hideThirdPart","display","inline-block")}),l(z("YT-hideThirdPart"),"click",function(){for(var a=z("YT-thirdList").getElementsByTagName("span"),b=4,c=a.length-2;c>b;b++)G(a[b],"hide");I("YT-showAllThirdPart","display","inline-block"),K("YT-hideThirdPart")})}}function f(a){var b=!1,d={};this.config=j(!0,d,a),this.getQRCode=function(){x({url:e.config.mainSiteUrl+"/qrcode/show.json",data:{callback:e.config.callback,buid:e.config.buid,pid:e.config.pid,template:e.config.template,size:200,logo:e.config.qrBu[0]?e.config.qrBu[0]:"ykt",logosize:e.config.qrBu[1]?e.config.qrBu[1]:80,logoOnTop:e.config.qrBu[2]?e.config.qrBu[2]:"false"},dataType:"jsonp",success:function(a){if("success"==a.result){if(a.msg.qrImgUrl){z("YT-qrImg").src=a.msg.qrImgUrl,J("YT-qrImg");var b=a.msg.code;ia&&(clearInterval(ia),ia=null),ia=setInterval(function(){return z("YT-qrLogin")&&"none"==z("YT-qrLogin").style.display?(clearInterval(ia),!1):void x({url:e.config.mainSiteUrl+"/qrcode/loginByCode.json",data:{buid:e.config.buid,pid:e.config.pid,template:e.config.template,code:b},dataType:"jsonp",success:function(a){"success"==a.result?(clearInterval(ia),ia=null,K("YT-qrLogining"),J("YT-qrLoginOK"),c.prototype.mainLoginSuccess(a,e.config.buid,e.config.pid,e.config.template)):"QR_CODE_ERROR"==a.errorCode&&(J("YT-invalidTips"),clearInterval(ia),ia=null)}})},3e3)}}else J("YT-invalidTips")}})};var e=this,f=YTL_CONFIG.preDomain;switch(e.config.buid){case"youku":f+="account.youku.com/static-resources/images/qrImgTips.png";break;case"tudou":f+="account.youku.com/static-resources/images/qrImgTips_tudou.png";break;case"laifeng":f+="account.youku.com/static-resources/images/qrImgTips_laifeng.png";break;case"soku":f+="account.youku.com/static-resources/images/qrImgTips_soku.png";break;default:f+="account.youku.com/static-resources/images/qrImgTips.png"}z("YT-qrImgTips").src=f,l(z("YT-qrbtn"),"click",function(){h(),b?("mobile"==e.config.loginType&&(J("YT-mobileLogin"),F(z("YT-showNormalLogin"),"active"),c.prototype.changeTitle("\u77ed\u4fe1\u767b\u5f55")),"normal"==e.config.loginType&&(J("YT-normalLogin"),F(z("YT-showMobileLogin"),"active"),c.prototype.changeTitle("\u8d26\u53f7\u767b\u5f55")),validateResult={},sa=!0,ia&&(clearInterval(ia),ia=null),b=!1,K("YT-qrLogin"),J("YT-thirdParyBody"),F(z("YT-qrbtn"),"topc"),z("YT-qrbtn").title="\u626b\u7801\u767b\u5f55",K("YT-errorTips"),z("YT-errorTips").innerHTML="",K("YT-invalidTips")):(K("YT-mobileLogin"),K("YT-normalLogin"),G(z("YT-showMobileLogin"),"active"),G(z("YT-showNormalLogin"),"active"),c.prototype.changeTitle("\u626b\u7801\u767b\u5f55"),J("YT-qrLogin"),K("YT-thirdParyBody"),G(z("YT-qrbtn"),"topc"),z("YT-qrbtn").title="\u666e\u901a\u767b\u5f55",c.prototype.cleanErrTips("YT-normalLogin"),c.prototype.cleanErrTips("YT-mobileLogin"),b=!0,e.getQRCode(),c.prototype.delCaptcha(),K("YT-errorTips"),l(z("YT-reGetQRCode"),"click",function(){K("YT-invalidTips"),e.getQRCode()}))});var g=P("YT-qr-imgtips")[0];l(z("YT-showHelp"),"mouseenter",function(){G(g,"show")}),l(z("YT-showHelp"),"mouseleave",function(){F(g,"show")})}function g(a,b,c,d,e,f){function g(){F(a,"active"),F(b,"active"),z("YT-mobileBack")&&F(z("YT-mobileBack"),"active"),m(document,"click",g)}if(z("YT-mobileBack")&&z("YT-mobileBack")&&z("YT-countryWrap")&&(document.getElementsByTagName("body")[0].appendChild(z("YT-mobileBack")),document.getElementsByTagName("body")[0].appendChild(z("YT-countryWrap"))),l(a,"mouseleave",function(){l(document,"click",g)}),l(a,"mouseenter",function(){m(document,"click",g)}),l(a,"click",function(){E(b,"active")?g():(G(a,"active"),G(b,"active"),z("YT-mobileBack")&&G(z("YT-mobileBack"),"active"))}),l(z("YT-mobileBack"),"click",function(){g()}),l(z("YT-country-cancel"),"click",function(){g()}),c)for(var h=c.getElementsByTagName("li"),i=0,j=h.length;j>i;i++)!function(a){l(h[a],"click",function(){E(h[a],"line")||A(z("YT-countryRegin"))!=M(h[a],"country")&&(z("YT-countryName")&&N(z("YT-countryName"),M(h[a],"countryName")),N(d,"+"+M(h[a],"countryCode")),B(z("YT-countryRegin"),M(h[a],"country")),B(e,""),g())})}(i)}function h(){Da=!0,Ea=!0,setTimeout(function(){Da=!1,Ea=!1},YTL_CONFIG.blurLockTime)}function i(a){return a.replace(/<script.*?>.*?<\/script>/gi,"")}function j(a,b,c){for(var d in c){var e=c[d];a&&e instanceof Array?b[d]=j(a,[],e):a&&e instanceof Object&&"function"!=typeof e?b[d]=j(a,{},e):a&&"string"==typeof e&&""!=e?b[d]=i(e):a&&"boolean"==typeof e?b[d]=e:a&&""!=e&&(b[d]=e)}return b}function k(a,b){if(a){if(YTL_CONFIG.emailReg.test(a))return"email";var c=b?b:"CN",d=new RegExp(YTL_CONFIG.allMobileRegExp[c]);return d.test(a)?"mobile":"string"}}function l(a,b,c){a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))}function m(a,b,c){a&&(a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c))}function n(b){var c=a.event||b,d=c.target||c.srcElement;return 3==d.nodeType&&(d=d.parentNode),d}function o(b){if(z(b)){var c=z(b).getElementsByTagName("input"),d=(z("YT-ytaccount")||z("YT-passport"),z("YT-ytpassword")||z("YT-regPassword")),e=!1;a.attachEvent?l(d,"propertychange",function(a){var b=n(a);e||""==A(b)||(e=!0,p(b),e=!1)}):l(d,"input",function(a){var b=n(a);e||""==A(b)||(e=!0,p(b),e=!1)});for(var f=0;f<c.length;f++)E(c[f],"YT-form-input")&&(l(c[f],"focus",function(a){var b=n(a);p(b)}),l(c[f],"blur",function(a){var b=n(a);q(b,A(b))}),""!=A(c[f])&&G(c[f].parentNode.getElementsByTagName("label")[0],"hideholder"));setTimeout(function(){for(var a=0;a<c.length;a++)E(c[a],"YT-form-input")&&""!=A(c[a])&&G(c[a].parentNode.getElementsByTagName("label")[0],"hideholder")},150)}}function p(a){if(a){var b=a.parentNode.getElementsByTagName("label")[0];G(b,"hideholder")}}function q(a,b){var c=a.parentNode.getElementsByTagName("label")[0];""==b&&F(c,"hideholder")}function r(a,b){var c=(a.split(""),16*s(a[0])+s(a[1])),d=16*s(a[2])+s(a[3]),e=16*s(a[4])+s(a[5]);return"rgba("+c+","+d+","+e+","+b+")"}function s(a){return"a"==a||"A"==a?10:"b"==a||"B"==a?11:"c"==a||"C"==a?12:"d"==a||"D"==a?13:"e"==a||"E"==a?14:"f"==a||"F"==a?15:parseInt(a)}function t(a){return a?a.replace(/(^\s*)|(\s*$)/g,""):void 0}function u(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function v(a,b,c){new Date;document.cookie=a+"="+escape(b)+";domain="+c+";path=/;"}function w(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}function x(b){var b=b||{};if(b.callback="jsonpCallback",!b.url)throw new Error("\u53c2\u6570\u4e0d\u5b8c\u6574");b.time=YTL_CONFIG.jsonpTimeout;var c="jsonp_"+(new Date).getTime()+Math.floor(9999*Math.random()+1).toString(),d=document.getElementsByTagName("head")[0];b.data[b.callback]=c;var e=w(b.data),f=document.createElement("script");d.appendChild(f),a[c]=function(e){return d.removeChild(f),clearTimeout(f.timer),b.blur&&Da?void(a[c]=null):(b.success&&b.success(e),void(a[c]=null))},f.src=b.url+"?"+e,b.time&&(f.timer=setTimeout(function(){a[c]=null,d.removeChild(f),b.fail&&b.fail({message:"\u8d85\u65f6"})},b.time))}function y(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function z(a){return a?document.getElementById(a):!1}function A(a){return a?a.value:void 0}function B(a,b){a&&(a.value=b)}function C(){var b=a.location.hostname,c=b.split("."),d=c.length;return thisDomain=c[d-2]+"."+c[d-1]}function D(a){var b=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/,c=b.exec(a),d=c[0].split("."),e=d.length;return thisDomain=d[e-2]+"."+d[e-1]}function E(a,b){if(!a.className)return!1;var c=a.className;return c.indexOf(b)>-1}function F(a,b){if(!a||!a.className)return!1;var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c,"")}function G(a,b){return a?void(E(a,b)||(a.className+=" "+b)):!1}function H(a,b){if(z(a)){if(z(a).currentStyle)return z(a).currentStyle[b];var c=z(a).ownerDocument.defaultView.getComputedStyle(z(a),null);return c[b]}}function I(a,b,c){z(a)&&(z(a).style[b]=c)}function J(a){I(a,"display","block")}function K(a){I(a,"display","none")}function L(a,b,c){a&&a.setAttribute(b,c)}function M(a,b){return a?a.getAttribute(b):void 0}function N(a,b){a&&(a.innerHTML=b)}function O(a,b){a&&(a.className=b)}function P(a){var b=[];_el=document.getElementsByTagName("*");for(var c=0,d=_el.length;d>c;c++)try{for(var e=_el[c].className.split(" "),f=0,g=e.length;g>f;f++)e[f]==a&&b.push(_el[c])}catch(h){}return b}function Q(a){return S(R(T(a)))}function R(a){return V(W(U(a),8*a.length))}function S(a){try{}catch(b){Ga=0}for(var c,d=Ga?"0123456789ABCDEF":"0123456789abcdef",e="",f=0;f<a.length;f++)c=a.charCodeAt(f),e+=d.charAt(c>>>4&15)+d.charAt(15&c);return e}function T(a){for(var b,c,d="",e=-1;++e<a.length;)b=a.charCodeAt(e),c=e+1<a.length?a.charCodeAt(e+1):0,b>=55296&&56319>=b&&c>=56320&&57343>=c&&(b=65536+((1023&b)<<10)+(1023&c),e++),127>=b?d+=String.fromCharCode(b):2047>=b?d+=String.fromCharCode(192|b>>>6&31,128|63&b):65535>=b?d+=String.fromCharCode(224|b>>>12&15,128|b>>>6&63,128|63&b):2097151>=b&&(d+=String.fromCharCode(240|b>>>18&7,128|b>>>12&63,128|b>>>6&63,128|63&b));return d}function U(a){for(var b=Array(a.length>>2),c=0;c<b.length;c++)b[c]=0;for(var c=0;c<8*a.length;c+=8)b[c>>5]|=(255&a.charCodeAt(c/8))<<c%32;return b}function V(a){for(var b="",c=0;c<32*a.length;c+=8)b+=String.fromCharCode(a[c>>5]>>>c%32&255);return b}function W(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,e=-1732584194,f=271733878,g=0;g<a.length;g+=16){var h=c,i=d,j=e,k=f;c=Y(c,d,e,f,a[g+0],7,-680876936),f=Y(f,c,d,e,a[g+1],12,-389564586),e=Y(e,f,c,d,a[g+2],17,606105819),d=Y(d,e,f,c,a[g+3],22,-1044525330),c=Y(c,d,e,f,a[g+4],7,-176418897),f=Y(f,c,d,e,a[g+5],12,1200080426),e=Y(e,f,c,d,a[g+6],17,-1473231341),d=Y(d,e,f,c,a[g+7],22,-45705983),c=Y(c,d,e,f,a[g+8],7,1770035416),f=Y(f,c,d,e,a[g+9],12,-1958414417),e=Y(e,f,c,d,a[g+10],17,-42063),d=Y(d,e,f,c,a[g+11],22,-1990404162),c=Y(c,d,e,f,a[g+12],7,1804603682),f=Y(f,c,d,e,a[g+13],12,-40341101),e=Y(e,f,c,d,a[g+14],17,-1502002290),d=Y(d,e,f,c,a[g+15],22,1236535329),c=Z(c,d,e,f,a[g+1],5,-165796510),f=Z(f,c,d,e,a[g+6],9,-1069501632),e=Z(e,f,c,d,a[g+11],14,643717713),d=Z(d,e,f,c,a[g+0],20,-373897302),c=Z(c,d,e,f,a[g+5],5,-701558691),f=Z(f,c,d,e,a[g+10],9,38016083),e=Z(e,f,c,d,a[g+15],14,-660478335),d=Z(d,e,f,c,a[g+4],20,-405537848),c=Z(c,d,e,f,a[g+9],5,568446438),f=Z(f,c,d,e,a[g+14],9,-1019803690),e=Z(e,f,c,d,a[g+3],14,-187363961),d=Z(d,e,f,c,a[g+8],20,1163531501),c=Z(c,d,e,f,a[g+13],5,-1444681467),f=Z(f,c,d,e,a[g+2],9,-51403784),e=Z(e,f,c,d,a[g+7],14,1735328473),d=Z(d,e,f,c,a[g+12],20,-1926607734),c=$(c,d,e,f,a[g+5],4,-378558),f=$(f,c,d,e,a[g+8],11,-2022574463),e=$(e,f,c,d,a[g+11],16,1839030562),d=$(d,e,f,c,a[g+14],23,-35309556),c=$(c,d,e,f,a[g+1],4,-1530992060),f=$(f,c,d,e,a[g+4],11,1272893353),e=$(e,f,c,d,a[g+7],16,-155497632),d=$(d,e,f,c,a[g+10],23,-1094730640),c=$(c,d,e,f,a[g+13],4,681279174),f=$(f,c,d,e,a[g+0],11,-358537222),e=$(e,f,c,d,a[g+3],16,-722521979),d=$(d,e,f,c,a[g+6],23,76029189),c=$(c,d,e,f,a[g+9],4,-640364487),f=$(f,c,d,e,a[g+12],11,-421815835),e=$(e,f,c,d,a[g+15],16,530742520),d=$(d,e,f,c,a[g+2],23,-995338651),c=_(c,d,e,f,a[g+0],6,-198630844),f=_(f,c,d,e,a[g+7],10,1126891415),e=_(e,f,c,d,a[g+14],15,-1416354905),d=_(d,e,f,c,a[g+5],21,-57434055),c=_(c,d,e,f,a[g+12],6,1700485571),f=_(f,c,d,e,a[g+3],10,-1894986606),e=_(e,f,c,d,a[g+10],15,-1051523),d=_(d,e,f,c,a[g+1],21,-2054922799),c=_(c,d,e,f,a[g+8],6,1873313359),f=_(f,c,d,e,a[g+15],10,-30611744),e=_(e,f,c,d,a[g+6],15,-1560198380),d=_(d,e,f,c,a[g+13],21,1309151649),c=_(c,d,e,f,a[g+4],6,-145523070),f=_(f,c,d,e,a[g+11],10,-1120210379),e=_(e,f,c,d,a[g+2],15,718787259),d=_(d,e,f,c,a[g+9],21,-343485551),c=aa(c,h),d=aa(d,i),e=aa(e,j),f=aa(f,k)}return Array(c,d,e,f)}function X(a,b,c,d,e,f){return aa(ba(aa(aa(b,a),aa(d,f)),e),c)}function Y(a,b,c,d,e,f,g){return X(b&c|~b&d,a,b,e,f,g)}function Z(a,b,c,d,e,f,g){return X(b&d|c&~d,a,b,e,f,g)}function $(a,b,c,d,e,f,g){return X(b^c^d,a,b,e,f,g)}function _(a,b,c,d,e,f,g){return X(c^(b|~d),a,b,e,f,g)}function aa(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function ba(a,b){return a<<b|a>>>32-b}var ca,da,ea,fa,ga,ha,ia,ja,ka,la="login",ma=!0,na="email",oa="normal",pa=!0,qa=!1,ra=!1,sa=!0,ta=!0,ua=!1,va=["fb5570","ffbec9"],wa={},xa=!1,ya="",za=!0,Aa={},Ba=null,Ca=null,Da=!1,Ea=!1,ca=YTL_CONFIG.preDomain+"account.youku.com";YTL_CONFIG.preDomain+"account.youku.com";fa=YTL_CONFIG.preDomain+"account.",ga=["youku.com","laifeng.com","laiwantv.com","tudou.com","soku.com"];var Fa;c.prototype={init:function(){var a=this;a.checkMainSiteLogin(),a.loadStyleSheet()},buildLoginDom:function(b){var c=this;c.config.from=b?b:c.config.from,la="login",ra=!1,pa=!0,sa=!0,wa={},Da=!0,x({url:ca+"/loginView.htm",data:{callback:c.config.callbackURL,buid:c.config.buid,pid:c.config.pid,template:c.config.template,loginModel:c.config.loginModel,isQRlogin:c.config.isQRlogin,isThirdPartLogin:c.config.isThirdPartLogin,size:c.config.size},dataType:"jsonp",success:function(b){setTimeout(function(){Da=!1},YTL_CONFIG.blurLockTime),c.appendDom(b);var d={};if(d.isExist=!0,oa=c.config.loginModel[0],c.changeLoginType(oa),l(z("YT-showMobileLogin"),"click",function(){var a=A(z("YT-ytaccount")),b=A(z("YT-countryRegin"));""!=a&&"mobile"==k(a,b)&&(B(z("YT-mAccount"),a),G(z("YT-mAccount").parentNode.getElementsByTagName("label")[0],"hideholder"),F(z("YT-getMobileCode"),"disabled")),c.changeLoginType("mobile")}),l(z("YT-showNormalLogin"),"click",function(){var a=A(z("YT-mAccount")),b=A(z("YT-countryRegin"));""!=a&&"mobile"==k(a,b)&&(B(z("YT-ytaccount"),a),G(z("YT-ytaccount").parentNode.getElementsByTagName("label")[0],"hideholder")),c.changeLoginType("normal")}),""!=ya){var i=A(z("YT-countryRegin")),j=k(ya,i);"email"==j?(B(z("YT-ytaccount"),ya),c.changeLoginType("normal"),ya=""):"mobile"==j&&(B(z("YT-mAccount"),ya),c.changeLoginType("mobile"),F(z("YT-getMobileCode"),"disabled"),ya="")}c.setUI(),c.bindBlurEvent({inputId:"YT-ytaccount",checkExist:!0,ajaxCheck:{url:ca+"/passport/isUserExist.json",bizType:"login",callback:function(a){if("success"==a.result)if(a.msg.exist){if(d.isExist=!0,c.clearThisTips("YT-ytaccount"),a.msg.needCaptcha)return c.createCaptcha("","","","login",3),!1;c.delCaptcha()}else{var b=A(z("YT-countryRegin"));"mobile"==k(A(z("YT-ytaccount")),b)&&y(c.config.loginModel,"mobile")?c.showErrTips(c.config.errorTips.account.not_exist_mobile,"YT-ytaccount"):(c.showErrTips(c.config.errorTips.account.notExist,"YT-ytaccount"),d.isExist=!1)}else a.errorMsg&&""!=a.errorMsg?c.showErrTips(a.errorMsg,"YT-ytaccount"):c.showErrTips("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5","YT-ytaccount")}}}),c.bindBlurEvent({inputId:"YT-ytpassword"}),l(z("YT-mAccount"),"keyup",function(){var a=A(z("YT-mAccount")),b=A(z("YT-countryRegin"));"mobile"==k(a,b)&&ma?F(z("YT-getMobileCode"),"disabled"):G(z("YT-getMobileCode"),"disabled")}),l(z("YT-mAccount"),"change",function(){var a=A(z("YT-mAccount")),b=A(z("YT-countryRegin"));"mobile"==k(a,b)&&ma?F(z("YT-getMobileCode"),"disabled"):G(z("YT-getMobileCode"),"disabled")}),g(z("YT-openListBtn"),z("YT-countryWrap"),z("YT-countryList"),z("YT-countryCode"),z("YT-mPassword"),z("YT-mAccount")),c.bindBlurEvent({inputId:"YT-mAccount",checkType:"mobile",typeSuccess:function(){d.isMobile=!0,c.clearThisTips("YT-mAccount")},typeFail:function(){d.isMobile=!1,c.showErrTips(c.config.errorTips.account.valid_mobile,"YT-mAccount")},checkExist:!0,ajaxCheck:{url:ca+"/passport/isUserExist.json",bizType:"login",callback:function(a){"success"==a.result?(c.clearThisTips("YT-mAccount"),d.isExist=!0,ma&&F(z("YT-getMobileCode"),"disabled")):(c.clearThisTips("YT-mAccount"),"PASSPORT_LOCKED"!=a.errorCode&&(G(z("YT-getMobileCode"),"disabled"),c.showErrTips(a.errorMsg,"YT-mAccount")))}}}),c.bindBlurEvent({inputId:"YT-mPassword"});var m;if(l(z("YT-nloginSubmit"),"click",function(){m=new FormValidator("YT-normalLogin",[{name:"YT-ytaccount",rules:"required",errorMsg:c.config.errorTips.account},{name:"YT-ytpassword",rules:"required",errorMsg:c.config.errorTips.password}],function(a,b){z("YT-errorTips");if(a.length>0)c.showErrTips(a[0].message);else{if(c.clearThisTips(),!d.isExist)return void c.showErrTips(c.config.errorTips.account.notExist,"YT-ytaccount");if(ra&&!pa)return void(""==A(z("YT-captcha"))?c.showErrTips(c.config.errorTips.captcha.required,"YT-captcha"):c.showErrTips(c.config.errorTips.captcha.error,"YT-captcha"));if("none"==H("YT-normalLogin","display"))return;c.loginSubmit()}}),setTimeout(function(){ra&&m._addField({name:"YT-captcha",display:"\u9a8c\u8bc1\u7801",rules:"required",errorMsg:c.config.errorTips.captcha},"YT-captcha"),m._validateForm()},300)}),l(z("YT-mloginSubmit"),"click",function(){m=new FormValidator("YT-mobileLogin",[{name:"YT-mAccount",rules:"required|valid_mobile",errorMsg:c.config.errorTips.mobile},{name:"YT-mPassword",rules:"required",errorMsg:{required:c.config.errorTips.smsCode.smsPsd}}],function(a,b){z("YT-errorTips");if(a.length>0)c.showErrTips(a[0].message);else{if(c.clearThisTips(),ra&&(pa||(""==A(z("YT-captcha"))?c.showErrTips(c.config.errorTips.captcha.required):c.showErrTips(c.config.errorTips.captcha.error))),!qa)return c.showErrTips("\u8bf7\u5148\u83b7\u53d6\u52a8\u6001\u5bc6\u7801"),!1;if("none"==H("YT-mobileLogin","display"))return;c.loginSubmit()}}),setTimeout(function(){ra&&m._addField({name:"YT-captcha",display:"\u9a8c\u8bc1\u7801",rules:"required",errorMsg:c.config.errorTips.captcha},"YT-captcha"),m._validateForm()},300)}),l(z("YT-getMobileCode"),"click",function(){if(E(z("YT-getMobileCode"),"disabled"))return!1;var a=new FormValidator("YT-mobileLogin",[{name:"YT-mAccount",rules:"required|valid_mobile",errorMsg:c.config.errorTips.mobile}],function(a,b){z("YT-errorTips");if(a.length>0)c.showErrTips(a[0].message);else{c.clearThisTips();var d=A(z("YT-mAccount"));c.getMobileCode("YT-getMobileCode",d,"login")}});a._validateForm()}),c.config.isQRlogin&&"tempMobile"!=c.config.template){new f({callback:""==c.config.callbackURL?a.location.href:c.config.callbackURL,mainSiteUrl:ca,buid:c.config.buid,pid:c.config.pid,template:c.config.template,qrBu:c.config.qrBu,loginType:oa})}if(c.config.isThirdPartLogin){new e(c.config.template)}"tempMobile"==c.config.template&&(l(z("YT-isShowPsd"),"click",function(){this.checked?(z("YT-ytpassword").type="text",G(z("YT-switchCheck"),"checked")):(z("YT-ytpassword").type="password",F(z("YT-switchCheck"),"checked"))}),l(z("YT-cleanNormal"),"click",function(){h(),B(z("YT-ytaccount"),""),B(z("YT-ytpassword"),""),K("YT-cleanNormal")}),l(z("YT-cleanMobile"),"click",function(){h(),B(z("YT-mAccount"),""),B(z("YT-mPassword"),""),K("YT-cleanMobile")}),l(z("YT-ytaccount"),"input",function(){J("YT-cleanNormal")}),l(z("YT-mAccount"),"input",function(){J("YT-cleanMobile")})),l(z("YT-registeBtn"),"click",function(){"in"==c.config.regShowType?c.buildRegDom():a.location.href=ca+"/register.htm"})}})},buildRegDom:function(b){
var c=this;c.config.from=b?b:c.config.from,la="reg",ra=!1,pa=!0,ta=!0,wa={},xa=!1,ya="",c.clearGetMobileCode(),"in"!=c.config.regShowType&&(a.location.href=ca+"/register.htm"),Da=!0,x({url:ca+"/registerView.htm",data:{callback:c.config.callbackURL,buid:c.config.buid,pid:c.config.pid,template:c.config.template,regModel:c.config.regModel,size:c.config.size},dataType:"jsonp",success:function(a){function b(a){if(wa={},ta=!0,e={},e.isExist=!1,xa=!1,qa=!1,na=a,c.delCaptcha(),h(),O(z("YT-psdStrong"),"YT-psd-strong"),O(z("YT-psdStrong2"),"YT-psd-strong"),I("YT-mobileReg","display","mobile"==a?"block":"none"),I("YT-emailReg","display","mobile"==a?"none":"block"),c.cleanErrTips("mobile"==a?"YT-emailReg":"YT-mobileReg"),c.changeTitle("mobile"==a?"\u624b\u673a\u6ce8\u518c":"\u90ae\u7bb1\u6ce8\u518c"),c.clearGetMobileCode("mobile"==a?"YT-getMobileCode01":"YT-getMobileCode02"),B(z("YT-countryRegin"),M(z("YT-countryRegin"),"data-deRegion")),N(z("YT-countryCode"),"+"+M(z("YT-countryRegin"),"data-deCode")),N(z("YT-countryName"),M(z("YT-countryRegin"),"data-deName")),N(z("YT-countryCode-email"),"+"+M(z("YT-countryRegin"),"data-deCode")),F(z("mobile"==a?"YT-openListBtn-email":"YT-openListBtn"),"active"),F(z("mobile"==a?"YT-countryWrap-email":"YT-countryWrap"),"active"),"mobile"==a?(G(z("YT-showMobileReg"),"active"),F(z("YT-showEmailReg"),"active")):(G(z("YT-showEmailReg"),"active"),F(z("YT-showMobileReg"),"active")),"popup"==c.config.mode&&"tempA"==c.config.template){var b=-z("YT-loginFramePop").clientHeight/2;I("YT-loginFramePop","marginTop",(-300>b?-300:b)+"px")}}setTimeout(function(){Da=!1},YTL_CONFIG.blurLockTime),na=c.config.regModel[0],c.appendDom(a),c.setUI(),ta=!0;var d=!0,e={};e.isExist=!1,l(z("YT-gotoLogin"),"click",function(){c.buildLoginDom()}),b(na),l(z("YT-showMobileReg"),"click",function(){b("mobile")}),l(z("YT-showEmailReg"),"click",function(){b("email")}),c.bindCheckPsdStrong("YT-regPassword","YT-psdStrong"),c.bindBlurEvent({inputId:"YT-passport",checkType:"email",typeSuccess:function(){e.isEmail=!0,c.clearThisTips("YT-passport")},typeFail:function(){e.isEmail=!1,c.showErrTips(c.config.errorTips.account.valid_email,"YT-passport")},checkExist:!0,ajaxCheck:{url:ca+"/passport/isUserExist.json",bizType:"register",callback:function(a){if("success"==a.result)if(a.msg.exist)e.isExist=!0,c.showErrTips(c.config.errorTips.account.exist,"YT-passport"),G(z("YT-getMobileCode01"),"disabled"),ya=A(z("YT-passport"));else{ya="",c.clearThisTips("YT-passport"),e.isExist=!1;var b=A(z("YT-countryRegin"));if(z("YT-regPhone")&&"mobile"==k(A(z("YT-regPhone")),b)&&ma&&F(z("YT-getMobileCode01"),"disabled"),a.msg.needCaptcha)return c.createCaptcha("","","","register",6),!1;c.delCaptcha()}else{if(z("YT-passport")&&"email"!=k(A(z("YT-passport"))))return c.showErrTips(c.config.errorTips.account.valid_email,"YT-passport"),!1;"EMAIL_ALREADY_EXIST"==a.errorCode?(e.isExist=!0,c.showErrTips(c.config.errorTips.account.exist,"YT-passport"),ya=A(z("YT-passport"))):a.errorMsg&&""!=a.errorMsg?c.showErrTips(a.errorMsg,"YT-passport"):c.showErrTips(c.config.errorTips.errorCode.defaults,"YT-passport")}}}}),c.bindBlurEvent({inputId:"YT-regPassword",checkPsdValid:!0,matchInput:"YT-passport"}),c.bindRepeatPsdEvent("YT-regPassword","YT-repeatPsd"),c.bindBlurEvent({inputId:"YT-regPhone",checkType:"mobile",typeSuccess:function(){c.clearThisTips("YT-regPhone"),e.isMobile=!0,ma&&F(z("YT-getMobileCode01"),"disabled")},typeFail:function(){e.isMobile=!1,G(z("YT-getMobileCode01"),"disabled"),c.showErrTips(c.config.errorTips.mobile.valid_mobile,"YT-regPhone")}}),c.bindBlurEvent({inputId:"YT-validateCode"}),c.bindBlurEvent({inputId:"YT-mPassport",checkType:"mobile",typeSuccess:function(){c.clearThisTips("YT-mPassport"),e.isMobile=!0},typeFail:function(){e.isMobile=!1,c.showErrTips(c.config.errorTips.mobile.valid_mobile,"YT-mPassport")},checkExist:!0,ajaxCheck:{url:ca+"/passport/isUserExist.json",bizType:"register",callback:function(a){if("success"==a.result)if(a.msg.exist)e.isExist=!0,G(z("YT-getMobileCode02"),"disabled"),c.showErrTips(c.config.errorTips.account.exist,"YT-mPassport"),ya=A(z("YT-mPassport"));else{if(e.isExist=!1,ma&&F(z("YT-getMobileCode02"),"disabled"),c.clearThisTips("YT-mPassport"),ya="",a.msg.needCaptcha)return c.createCaptcha("","","","register",5),!1;c.delCaptcha()}else"MOBILE_ALREADY_EXIST"==a.errorCode?(e.isExist=!0,c.showErrTips(c.config.errorTips.account.exist,"YT-mPassport"),ya=A(z("YT-mPassport"))):a.errorMsg&&""!=a.errorMsg?c.showErrTips(a.errorMsg,"YT-mPassport"):c.showErrTips(c.config.errorTips.errorCode.defaults,"YT-mPassport")}}}),c.bindCheckPsdStrong("YT-mPassword","YT-psdStrong2"),c.bindBlurEvent({inputId:"YT-mPassword",checkPsdValid:!0}),c.bindRepeatPsdEvent("YT-mPassword","YT-mRepeatPsd"),c.bindBlurEvent({inputId:"YT-mValidateCode"}),l(z("YT-regPhone"),"keyup",function(){var a=A(z("YT-regPhone")),b=A(z("YT-countryRegin"));"mobile"==k(a,b)&&ma&&!e.isExist?F(z("YT-getMobileCode01"),"disabled"):G(z("YT-getMobileCode01"),"disabled")}),l(z("YT-regPhone"),"change",function(){var a=A(z("YT-regPhone")),b=A(z("YT-countryRegin"));"mobile"==k(a,b)&&ma&&!e.isExist?F(z("YT-getMobileCode01"),"disabled"):G(z("YT-getMobileCode01"),"disabled")}),l(z("YT-mPassport"),"keyup",function(){var a=z("YT-mPassport");A(a)&&B(a,t(A(a)))}),l(z("YT-passport"),"keyup",function(){var a=z("YT-passport");A(a)&&B(a,t(A(a)))}),"tempMobile"!=c.config.template&&g(z("YT-openListBtn-email"),z("YT-countryWrap-email"),z("YT-countryList-email"),z("YT-countryCode-email"),z("YT-validateCode"),z("YT-regPhone")),g(z("YT-openListBtn"),z("YT-countryWrap"),z("YT-countryList"),z("YT-countryCode"),z("YT-mValidateCode"),z("YT-mPassport"));var f=[{name:"YT-passport",rules:"required|valid_email",errorMsg:{required:c.config.errorTips.account.reg_email,valid_email:c.config.errorTips.account.valid_email}},{name:"YT-regPassword",rules:"required|cant_matches[YT-passport]|min_length[6]|max_length[16]|valid_psd_n_s_spe|!callback_is_psd_sick|!callback_cant_matchesEmail",errorMsg:c.config.errorTips.password},{name:"YT-repeatPsd",rules:"required|matches[YT-regPassword]",errorMsg:c.config.errorTips.repeatPassword},{name:"YT-regPhone",rules:"required|!valid_mobile",errorMsg:c.config.errorTips.mobile}],i=f.concat();i.push({name:"YT-validateCode",rules:"required",errorMsg:c.config.errorTips.validate});var j=[{name:"YT-mPassport",rules:"required|valid_mobile",errorMsg:c.config.errorTips.mobile}];"tempA"==c.config.template&&(j.push({name:"YT-mPassword",rules:"required|min_length[6]|max_length[16]|valid_psd_n_s_spe|!callback_is_psd_sick",errorMsg:c.config.errorTips.password}),j.push({name:"YT-mRepeatPsd",rules:"required|matches[YT-mPassword]",errorMsg:c.config.errorTips.repeatPassword}));var m=[{name:"YT-mPassport",rules:"required|valid_mobile",errorMsg:c.config.errorTips.mobile},{name:"YT-mPassword",rules:"required|min_length[6]|max_length[16]|valid_psd_n_s_spe|!callback_is_psd_sick",errorMsg:c.config.errorTips.password},{name:"YT-mValidateCode",rules:"required",errorMsg:c.config.errorTips.validate}];"tempA"==c.config.template&&m.push({name:"YT-mRepeatPsd",rules:"required|matches[YT-mPassword]",errorMsg:c.config.errorTips.repeatPassword}),l(z("YT-getMobileCode01"),"click",function(){if(E(this,"disabled"))return!1;var a=new FormValidator("YT-emailReg",f,function(a,b){z("YT-errorTips");if(a.length>0)c.showErrTips(a[0].message);else{c.clearThisTips();var d=A(z("YT-regPhone"));c.getMobileCode("YT-getMobileCode01",d,"register")}});a.registerCallback("is_psd_sick",function(a){return!xa}).setMessage("is_psd_sick",c.config.errorTips.password.is_psd_sick),a.registerCallback("cant_matchesEmail",function(a){var b=A(z("YT-passport")),c=b.substring(0,b.indexOf("@"));return A(z("YT-regPassword"))==c?!1:!0}).setMessage("cant_matchesEmail",c.config.errorTips.password.cant_matchesEmail),setTimeout(function(){a._validateForm()},200)}),l(z("YT-getMobileCode02"),"click",function(){if(E(this,"disabled"))return!1;var a=new FormValidator("YT-mobileReg",j,function(a,b){z("YT-errorTips");if(a.length>0)c.showErrTips(a[0].message);else{c.clearThisTips();var d=A(z("YT-mPassport"));c.getMobileCode("YT-getMobileCode02",d,"register")}});a.registerCallback("is_psd_sick",function(a){return!xa}).setMessage("is_psd_sick",c.config.errorTips.password.is_psd_sick),setTimeout(function(){a._validateForm()},200)});var n;l(z("YT-eRegSubmit"),"click",function(){return d?(n=new FormValidator("YT-emailReg",i,function(a,b){z("YT-errorTips");if(a.length>0)c.showErrTips(a[0].message);else{if(c.clearThisTips(),e.isExist)return c.showErrTips(c.config.errorTips.account.exist),!1;if(!qa)return c.showErrTips(c.config.errorTips.smsCode.noGet),!1;if(ra&&(pa||(""==A(z("YT-captcha"))?c.showErrTips(c.config.errorTips.captcha.required):c.showErrTips(c.config.errorTips.captcha.error))),"none"==H("YT-emailReg","display"))return;c.regSubmit()}}),void setTimeout(function(){ra&&n._addField({name:"YT-captcha",display:"\u9a8c\u8bc1\u7801",rules:"required",errorMsg:c.config.errorTips.captcha},"YT-captcha"),n._validateForm()},250)):(c.showErrTips("\u8bf7\u5148\u540c\u610f\u6ce8\u518c\u6761\u6b3e!"),!1)}),l(z("YT-mRegSubmit"),"click",function(){return d?(n=new FormValidator("YT-mobileReg",m,function(a,b){z("YT-errorTips");if(a.length>0)c.showErrTips(a[0].message);else{if(c.clearThisTips(),e.isExist)return c.showErrTips(c.config.errorTips.account.exist),!1;if(!qa)return c.showErrTips(c.config.errorTips.smsCode.noGet),!1;if(ra&&(pa||(""==A(z("YT-captcha"))?c.showErrTips(c.config.errorTips.captcha.required):c.showErrTips(c.config.errorTips.captcha.error))),"none"==H("YT-mobileReg","display"))return;c.regSubmit()}}),void setTimeout(function(){ra&&n._addField({name:"YT-captcha",display:"\u9a8c\u8bc1\u7801",rules:"required",errorMsg:c.config.errorTips.captcha},"YT-captcha"),n._validateForm()},250)):(c.showErrTips("\u8bf7\u5148\u540c\u610f\u6ce8\u518c\u6761\u6b3e!"),!1)}),l(z("YT-rulesLabel"),"click",function(){z("YT-agreeRegRules").checked?(G(this,"checked"),d=!0):(F(this,"checked"),d=!1)})}})},changeLoginType:function(a){var b=this;sa=!0,validateResult={},validateResult.isExist=!0,validateResult.isMobile=!0,qa=!1,h(),"mobile"==a?(G(z("YT-showMobileLogin"),"active"),F(z("YT-showNormalLogin"),"active")):(b.clearGetMobileCode("YT-getMobileCode"),F(z("YT-showMobileLogin"),"active"),G(z("YT-showNormalLogin"),"active")),oa="mobile"==a?"mobile":"normal",I("YT-normalLogin","display","mobile"==a?"none":"block"),I("YT-mobileLogin","display","mobile"==a?"block":"none"),b.cleanErrTips("mobile"==a?"YT-normalLogin":"YT-mobileLogin"),b.changeTitle("mobile"==a?"\u77ed\u4fe1\u767b\u5f55":"\u8d26\u53f7\u767b\u5f55"),b.delCaptcha(),B(z("YT-countryRegin"),M(z("YT-countryRegin"),"data-deRegion")),N(z("YT-countryCode"),"+"+M(z("YT-countryRegin"),"data-deCode")),N(z("YT-countryName"),M(z("YT-countryRegin"),"data-deName")),F(z("YT-countryWrap"),"active"),F(z("YT-openListBtn"),"active")},appendDom:function(b){var c=this;if("embedded"==c.config.mode){if(!c.config.frameID)return void alert("\u8bf7\u4f20\u5165\u5d4c\u5165\u5bb9\u5668\u7684ID");N(z(c.config.frameID),b.html),K("YT-closeLoginFrame")}else{var d,e;e=document.getElementsByTagName("body")[0],z("YT-loginFramePop")?d=z("YT-loginFramePop"):(d=document.createElement("div"),d.id="YT-loginFramePop",G(d,"YT-loginFrame-popbox")),N(d,b.html),c.showPopWindow(d),l(z("YT-closeLoginFrame"),"click",function(){c.closeFrame(c.config.closeCallback)})}Ba||(Ba=setInterval(function(){c.sendData()},1e4)),!Ca&&a.loginData&&(Ca=new loginData({clickCountEl:["YT-qrbtn","YT-showNormalLogin","YT-showMobileLogin","YT-getMobileCode","YT-nloginSubmit","YT-mloginSubmit","YT-showMobileReg","YT-getMobileCode01","YT-getMobileCode02","YT-eRegSubmit","YT-mRegSubmit","YT-registeBtn","YT-gotoLogin"],mouseoverCountEl:["YT-showHelp"],sendEl:["YT-registeBtn","YT-gotoLogin","YT-closeLoginFrame"],sendTimeout:1e4}))},bindCheckPsdStrong:function(a,b){var c=z(a);l(c,"keyup",function(){var a=A(c),d=0;a.match(/[a-z]/g)&&d++,a.match(/[0-9]/g)&&d++,a.match(/[A-Z]/g)&&d++,a.match(/(.[^a-z0-9])/g)&&d++,a.length<6||a.length>16?d=0:(YTL_CONFIG.numberReg.test(a)||YTL_CONFIG.codeReg.test(a)||YTL_CONFIG.specialReg.test(a))&&(d=1),0==d&&O(z(b),"YT-psd-strong strong0"),1==d&&O(z(b),"YT-psd-strong strong1"),2==d&&O(z(b),"YT-psd-strong strong2"),d>=3&&O(z(b),"YT-psd-strong strong3")})},bindBlurEvent:function(a){if(a){var b=this,c=z(a.inputId);l(c,"blur",function(){var d=A(c);if(!t(d))return void b.clearThisTips(a.inputId);var e=!1;if(a.checkType&&(""!=d||d)){var f;"mobile"==a.checkType&&(f=A(z("YT-countryRegin"))||"CN"),k(d,f)==a.checkType?(e=!0,a.typeSuccess&&a.typeSuccess()):(e=!1,a.typeFail&&a.typeFail())}if(a.checkExist)if(""!=d){if(a.checkType&&!e)return;var g=(c.name,{buid:b.config.buid,pid:b.config.pid,pid:b.config.pid,passport:d,formtoken:A(z("YT-formtoken")),template:b.config.template,bizType:a.ajaxCheck.bizType});("login"==a.ajaxCheck.bizType&&"mobile"==oa||"register"==a.ajaxCheck.bizType&&"mobile"==na)&&(g.region=A(z("YT-countryRegin"))),x({url:a.ajaxCheck.url,dataType:"jsonp",data:g,blur:!0,success:function(b){a.ajaxCheck.callback(b)}})}else b.clearThisTips(a.inputId);if(a.checkPsdValid&&""!=d){if(a.matchInput)var h=A(z(a.matchInput)),i=h.substring(0,h.indexOf("@"));if(d.length<6||d.length>16)return void b.showErrTips(b.config.errorTips.password.min_length,a.inputId);if(a.matchInput&&d==A(z(a.matchInput)))return void b.showErrTips(b.config.errorTips.password.cant_matches,a.inputId);if(a.matchInput&&i&&d==i)return void b.showErrTips(b.config.errorTips.password.cant_matchesEmail,a.inputId);if(!YTL_CONFIG.psdtest.test(d))return void b.showErrTips(b.config.errorTips.password.valid_psdStrong,a.inputId);if(YTL_CONFIG.numberReg.test(d)||YTL_CONFIG.codeReg.test(d)||YTL_CONFIG.specialReg.test(d))return void b.showErrTips(b.config.errorTips.password.valid_psd_n_s_spe,a.inputId);K("YT-errorTips"),b.clearThisTips(a.inputId),xa=!1,x({url:ca+"/passport/isPasswordValid.json",dataType:"jsonp",blur:!0,data:{formtoken:A(z("YT-formtoken")),buid:b.config.buid,pid:b.config.pid,password:d,bizType:"register"},success:function(c){"fail"==c.result&&"FORM_TIMEOUT"!=c.errorCode?(xa=!0,b.showErrTips(c.errorMsg,a.inputId)):(xa=!1,K("YT-errorTips"),b.clearThisTips(a.inputId))}})}})}},bindRepeatPsdEvent:function(a,b){var c=this,d=z(b),e=z(a);l(d,"blur",function(){var a=A(d);""!=a&&a&&a!=A(e)?c.showErrTips(c.config.errorTips.repeatPassword.matches,b):c.clearThisTips(b)})},loginSubmit:function(){var a=this,b={};if(!sa)return!1;if(sa=!1,"normal"==oa){var c=A(z("YT-ytaccount")),d=Q(A(z("YT-ytpassword")));b.passport=c,b.password=d,b.loginType="passport_pwd",G(z("YT-nloginSubmit"),"disabled"),N(z("YT-nloginSubmit"),"\u6b63\u5728\u8fdb\u5165...")}if("mobile"==oa){var c=A(z("YT-mAccount")),d=A(z("YT-mPassword"));b.passport=c,b.smsCode=d,b.loginType="mobile_sms_code",b.region=A(z("YT-countryRegin")),G(z("YT-mloginSubmit"),"disabled"),N(z("YT-mloginSubmit"),"\u6b63\u5728\u8fdb\u5165...")}if(b.formtoken=A(z("YT-formtoken")),ra&&"login"==la&&"normal"==oa){var e=A(z("YT-captcha"));b.captcha=e}var f=z("YT-ytremember");f.checked&&(b.rememberMe=!0),b.buid=a.config.buid,b.pid=a.config.pid,b.template=a.config.template,b.mode=a.config.mode,b.actionFrom=a.config.from,x({url:ca+"/login/confirm.json",data:b,dataType:"jsonp",success:function(b){"success"==b.result?a.mainLoginSuccess(b,a.config.buid,a.config.pid,a.config.template):(sa=!0,F(z("YT-mloginSubmit"),"disabled"),F(z("YT-nloginSubmit"),"disabled"),N(z("YT-mloginSubmit"),"\u767b\u5f55"),N(z("YT-nloginSubmit"),"\u767b\u5f55"),ra&&(pa=!1,a.changeCaptcha("login",a.config.buid,a.config.pid)),"FORM_TIMEOUT"==b.errorCode?a.showErrTips(a.config.errorTips.errorCode.loginTimeout):"NEED_CAPTCHA"==b.errorCode||"CAPTCHA_CODE_NULL"==b.errorCode||"CAPTCHA_KEY_NULL"==b.errorCode?"login"==la&&"normal"==oa&&a.createCaptcha("","","","login",3):"CAPTCHA_ERROR"==b.errorCode?(ra||(ra=!0,a.createCaptcha("","","","login",3)),pa=!1,a.showErrTips(a.config.errorTips.errorCode.CAPTCHA_ERROR)):b.errorMsg&&""!=b.errorMsg?a.showErrTips(b.errorMsg):a.showErrTips(a.config.errorTips.errorCode.defaults))}})},regSubmit:function(){var a=this,b={};return ta?(ta=!1,"email"==na&&(b.email=A(z("YT-passport")),b.password=A(z("YT-regPassword")),b.repeatPassword=A(z("YT-repeatPsd")),b.bindMobile=A(z("YT-regPhone")),b.smsCode=A(z("YT-validateCode")),G(z("YT-eRegSubmit"),"disabled"),N(z("YT-eRegSubmit"),"\u6b63\u5728\u6ce8\u518c...")),"mobile"==na&&(b.mobile=A(z("YT-mPassport")),b.password=A(z("YT-mPassword")),b.repeatPassword=A(z("YT-mRepeatPsd")),b.smsCode=A(z("YT-mValidateCode")),G(z("YT-mRegSubmit"),"disabled"),N(z("YT-mRegSubmit"),"\u6b63\u5728\u6ce8\u518c...")),ra&&(b.captcha=A(z("YT-captcha"))),"tempMobile"==a.config.template&&(b.repeatPassword=b.password),b.formtoken=A(z("YT-formtoken")),b.buid=a.config.buid,b.pid=a.config.pid,b.template=a.config.template,b.mode=a.config.mode,b.actionFrom=a.config.from,b.region=A(z("YT-countryRegin")),void x({url:ca+"/register/confirm.json",data:b,dataType:"jsonp",success:function(b){"success"==b.result?a.mainLoginSuccess(b,a.config.buid,a.config.pid,a.config.template):(ta=!0,F(z("YT-eRegSubmit"),"disabled"),F(z("YT-mRegSubmit"),"disabled"),N(z("YT-eRegSubmit"),"\u6ce8\u518c"),N(z("YT-mRegSubmit"),"\u6ce8\u518c"),ra&&(pa=!1,a.changeCaptcha("register",a.config.buid,a.config.pid)),"FORM_TIMEOUT"==b.errorCode?a.showErrTips(a.config.errorTips.errorCode.regTimeout):"NEED_CAPTCHA"==b.errorCode||"CAPTCHA_CODE_NULL"==b.errorCode||"CAPTCHA_KEY_NULL"==b.errorCode?a.createCaptcha("","","","register",6):"CAPTCHA_ERROR"==b.errorCode?(ra||(ra=!0,a.createCaptcha("","","","register",6)),pa=!1,a.showErrTips(a.config.errorTips.errorCode.CAPTCHA_ERROR)):"MOBILE_CODE_ERROR"==b.errorCode?a.showErrTips(a.config.errorTips.errorCode.MOBILE_CODE_ERROR):b.errorMsg&&""!=b.errorMsg?a.showErrTips(b.errorMsg):a.showErrTips(a.config.errorTips.errorCode.defaults))}})):!1},mainLoginSuccess:function(b,c,d,e){var f=this;if(b.msg.domains&&0!=b.msg.domains.length)f.crossFiveDomain(b,c,d,e);else if(z("YT-l_callback")&&""!=A(z("YT-l_callback"))){var g=A(z("l_callback")),h=D(g);if(h==D(ca))v("P_j_scl","hadCheckLogin",h),a.location.href=g;else{var i=fa+h;f.crossdomain(b,i,c,d,e)}}else D(da)==D(ca)?(v("P_j_scl","hadCheckLogin",D(da)),Fa()):f.crossdomain(b,da,c,d,e)},crossdomain:function(b,c,d,e,f){c||(c=da),b.msg.token&&x({url:c+"/login/crossdomain.json",data:{buid:d,pid:e,template:f,token:b.msg.token},dataType:"jsonp",success:function(b){if("success"!=b.result)throw new Error(b.errorMsg);if(z("YT-l_callback")&&""!=A(z("YT-l_callback"))){var c=D(A(z("YT-l_callback")));v("P_j_scl","hadCheckLogin",c),a.location.href=A(z("YT-l_callback"))}else v("P_j_scl","hadCheckLogin",D(da)),Fa()}})},crossFiveDomain:function(b,c,d,e){for(var f=b.msg.domains,g={},h=f.length,i=e,c=c,j=0;h>j;j++)!function(a){g["crossTimes"+a]=0,g["crossStatu"+a]=!0;var b=f[a];g["cross"+a]=setInterval(function(){return g["crossOver"+a]||g["crossTimes"+a]>=3?(g["cross"+a]&&(clearInterval(g["cross"+a]),g["cross"+a]=null),g["crossOver"+a]=!0,!1):g["crossStatu"+a]?(g["crossStatu"+a]=!1,x({url:ca+"/login/checkLogin.json",data:{template:e,buid:c,pid:d},dataType:"jsonp",success:function(e){return"fail"==e.result?(g["crossTimes"+a]++,g["crossStatu"+a]=!0,!1):void(e.msg.token&&x({url:YTL_CONFIG.preDomain+b+"/login/crossdomain.json",data:{buid:c,pid:d,template:i,token:e.msg.token},dataType:"jsonp",success:function(c){g["crossTimes"+a]++,g["crossStatu"+a]=!0,"success"==c.result&&(v("P_j_scl","hadCheckLogin",D(b)),clearInterval(g["cross"+a]),g["cross"+a]=null,g["crossOver"+a]=!0,g["crossStatu"+a]=!1)},fail:function(b){g["crossTimes"+a]++,g["crossStatu"+a]=!0}}))},fail:function(b){g["crossTimes"+a]++,g["crossStatu"+a]=!0}}),void(g["crossTimes"+a]>=3&&(clearInterval(g["cross"+a]),g["cross"+a]=null,g["crossOver"+a]=!0))):!1},100)}(j);var k=setInterval(function(){for(var b=0,c=0;h>c;c++)!function(a){g["crossOver"+a]&&b++}(c);b>=h&&(clearInterval(k),k=null,z("YT-l_callback")&&""!=A(z("YT-l_callback"))?a.location.href=A(z("YT-l_callback")):Fa())},100)},createCaptcha:function(a,b,c,d,e){var f=this;ra=!0,pa=!0;var e=e||"",g=f.config?f.config.buid?f.config.buid:"":a?a:"",h=f.config?f.config.pid?f.config.pid:"":b?b:"",c=f.config?f.config.template?f.config.template:"":c?c:"",d=d,i=ca+"/passport/captcha.htm?bizType="+d+"&buid="+g+"&pid="+h+"&time="+(new Date).getTime(),j="";if("tempMobile"==c){if(j='<label class="YT-a-cont label-icon icon-captcha" for="captcha"><input type="text" class="YT-form-input" maxlength="4" name="YT-captcha" id="YT-captcha" tabindex="'+e+'" placeholder="\u9a8c\u8bc1\u7801"></label><img src="'+i+'" width="90" height="34" alt="" maxlength="4" class="absolute-right" id="YT-captchaImg">',z("YT-captchaWrap"))k=z("YT-captchaWrap");else{var k=document.createElement("li");k.id="YT-captchaWrap"}"login"==la&&"normal"==oa?z("YT-normalLoginList").appendChild(k):"login"==la&&"mobile"==oa?z("YT-mobileLoginList").appendChild(k):"reg"==la&&"mobile"==na&&z("YT-registerList").appendChild(k),N(k,j),J("YT-captchaWrap")}else j='<div class="YT-form-group no-icon"><img id="YT-captchaImg" class="YT-captcha-img" title="\u70b9\u51fb\u66f4\u6362\u9a8c\u8bc1\u7801" src="'+i+'" width="100"><input type="text" maxLength="4" tabindex="'+e+'" class="YT-form-input short-input" id="YT-captcha" name="YT-captcha"></div>',"login"==la?ua?(N(z("YT-thirdCaptchaWrap"),j),z("YT-captchaWrap")&&N(z("YT-captchaWrap"),""),z("YT-mCaptchaWrap")&&N(z("YT-mCaptchaWrap"),"")):"normal"==oa?N(z("YT-captchaWrap"),j):"mobile"==oa?N(z("YT-mCaptchaWrap"),j):N(z("YT-captchaWrap"),j):"reg"==la?"normal"==na&&z("YT-captchaWrap")?N(z("YT-captchaWrap"),j):"mobile"==na&&z("YT-mCaptchaWrap")?N(z("YT-mCaptchaWrap"),j):N(z("YT-captchaWrap"),j):N(z("YT-captchaWrap"),j);l(z("YT-captchaImg"),"click",function(){f.changeCaptcha(d,g,h)}),l(z("YT-captcha"),"blur",function(){var a=A(z("YT-captcha"));""!=a&&x({url:ca+"/passport/checkCaptcha.json",dataType:"jsonp",blur:!0,data:{buid:g,pid:h,captcha:a,formtoken:A(z("YT-formtoken")),template:c,bizType:d},success:function(a){f.clearThisTips(),"success"==a.result?(pa=!0,f.clearThisTips("YT-captcha")):"CAPTCHA_ERROR"==a.errorCode?(pa=!1,f.showErrTips("\u56fe\u7247\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e","YT-captcha")):"CAPTCHA_TIMEOUT"==a.errorCode?(pa=!1,f.changeCaptcha(d,g,h)):pa=!0}})})},changeCaptcha:function(a,b,c){pa=!0;var d=z("YT-captchaImg");d.src=ca+"/passport/captcha.htm?bizType="+(a?a:"")+"&buid="+(b?b:"")+"&pid="+c+"&time="+(new Date).getTime(),B(z("YT-captcha"),"")},delCaptcha:function(){var a=this;ra&&(z("YT-captchaWrap")&&N(z("YT-captchaWrap"),""),z("YT-mCaptchaWrap")&&N(z("YT-mCaptchaWrap"),""),a.config&&"tempMobile"==a.config.template&&z("YT-captchaWrap")&&z("YT-captchaWrap").parentNode.removeChild(z("YT-captchaWrap")),ra=!1,pa=!0)},getMobileCode:function(a,b,c){var d=this;qa=!1;var e=z(a).innerHTML;ma&&x({url:ca+"/passport/sendMobileCode.json",data:{buid:d.config.buid,pid:d.config.pid,formtoken:A(z("YT-formtoken")),template:d.config.template,mobileNo:b,bizType:c,region:A(z("YT-countryRegin"))},dataType:"jsonp",success:function(b){if("success"==b.result){qa=!0,ma=!1,G(z(a),"disabled");var c=59;ja=setInterval(function(){return z(a)?(N(z(a),c+" \u79d2\u540e\u91cd\u53d1"),c--,void(0>c&&(clearInterval(ja),ma=!0,F(z(a),"disabled"),N(z(a),e)))):void clearInterval(ja)},1e3)}else d.showErrTips(b.errorMsg)}})},clearGetMobileCode:function(a){qa=!1,ma=!0,clearInterval(ja),ja=null,a&&z(a)&&("login"==la?(N(z(a),"\u83b7\u53d6\u52a8\u6001\u5bc6\u7801"),G(z(a),"disabled")):(N(z(a),"\u83b7\u53d6\u9a8c\u8bc1\u7801"),G(z(a),"disabled")))},chouseErr:function(a){var b=this,c=[];for(var d in wa)c.push(wa[d]);var e=c.length;if(b.config&&"tempMobile"==b.config.template)b.showMobileErr(c[e-1]);else{J("YT-errorTips");var f=c[e-1].replace(/<[^>]+>/g,"");if(a.innerText==f)return;N(a,c[e-1])}l(z("YT-existToLogin"),"click",function(){b.buildLoginDom()}),l(z("YT-toMLogin"),"click",function(){var a=A(z("YT-ytaccount")),c=A(z("YT-countryRegin"));""!=a&&"mobile"==k(a,c)&&(B(z("YT-mAccount"),a),G(z("YT-mAccount").parentNode.getElementsByTagName("label")[0],"hideholder")),setTimeout(function(){b.changeLoginType("mobile"),F(z("YT-getMobileCode"),"disabled")},200)})},showErrTips:function(a,b){var c=this,d=z("YT-errorTips");if(d&&(b&&(wa[b]=a),u(wa)?c.config&&"tempMobile"==c.config.template?c.showMobileErr(a):(J("YT-errorTips"),N(d,a)):c.chouseErr(d),c.config))for(var e in c.config.errorTips){var f=c.config.errorTips[e];for(var g in f)f[g]==a&&(Aa[e+g]?Aa[e+g]++:Aa[e+g]=1)}},showMobileErr:function(a){if(!z("YT-errorCont")){var b=document.createElement("div");b.id="YT-errorCont",O(b,"YT-errorCont"),z("YT-errorTips").appendChild(b)}ka=setTimeout(function(){Ea||za&&(N(z("YT-errorCont"),a),G(z("YT-errorTips"),"showErr"),J("YT-errorTips"),za=!1,setTimeout(function(){F(z("YT-errorTips"),"showErr"),G(z("YT-errorTips"),"hideErr"),setTimeout(function(){N(z("YT-errorCont"),""),F(z("YT-errorTips"),"hideErr"),K("YT-errorTips"),za=!0},150)},1500))},100)},clearThisTips:function(a){var b=this,c=z("YT-errorTips");c&&(a&&wa[a]&&delete wa[a],u(wa)?b.config&&"tempMobile"!=b.config.template&&(K("YT-errorTips"),N(c,"")):b.chouseErr(c))},cleanErrTips:function(a,b){wa={};var c=z("YT-errorTips");K("YT-errorTips"),N(c,"");var a=document.forms[a];if(a){var d=a.getElementsByTagName("input");if(!b||"tempMobile"!=b)for(var e=0,f=d.length;f>e;e++)if(""==d[e].getAttribute("type")||"text"==d[e].getAttribute("type")||"password"==d[e].getAttribute("type")){B(d[e],"");var g=d[e].parentNode.getElementsByTagName("label")[0];F(g,"hideholder")}}},checkMainSiteLogin:function(){var a=this;a.config.checkNoLogin()},changeTitle:function(a){N(z("YT-loginFrameTitle"),a)},showPopTips:function(a){var b=this,c=document.createElement("div"),d={title:"\u6ce8\u518c",type:"success",content:"<h3>\u606d\u559c\u60a8\uff0c\u6ce8\u518c\u6210\u529f\uff01</h3><p>\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u8d26\u53f7\u767b\u5f55\u4f18\u9177\u3001\u571f\u8c46\u3001\u6765\u75af\u7b49\u4f18\u9177\u571f\u8c46\u96c6\u56e2\u65d7\u4e0b\u4ea7\u54c1\u3002</p>",autoClose:3,callback:function(){}};d=j(!0,d,a),c.id="YT-popErrorBox",O(c,"YT-popErrorBox");var e="success"==d.type?"&#xe611;":"&#xe610;",f='<div class="YT-errbox-wrap"><div id="YT-errboxClose" class="YT-errbox-close"></div><div class="YT-errbox-head">'+d.title+'</div><div class="YT-errbox-body"><div class="YT-errbox-icon"><i class="YT-m-icon icon-large icon-'+d.type+'">'+e+'</i></div><div class="YT-errbox-cont">'+d.content+'</div></div><div class="YT-errbox-foot"><div id="YT-autoClose"></div>';if(N(c,f),b.showPopWindow(c),l(z("YT-errboxClose"),"click",function(){c.parentNode.removeChild(c),z("YT-loginFrameshade").parentNode.removeChild(z("YT-loginFrameshade")),d.callback()}),d.autoClose){var g=d.autoClose;N(z("YT-autoClose"),'<span style="color:#f9546f;">'+g+"</span> \u79d2\u540e\u81ea\u52a8\u5173\u95ed");var h=setInterval(function(){return g--,z("YT-autoClose")?(N(z("YT-autoClose"),'<span style="color:#f9546f;">'+g+"</span> \u79d2\u540e\u81ea\u52a8\u5173\u95ed"),void(0>=g&&(clearInterval(h),h=null,c.parentNode.removeChild(c),z("YT-loginFrameshade").parentNode.removeChild(z("YT-loginFrameshade")),d.callback()))):void clearInterval(h)},1e3)}},clearPopWindow:function(){z("YT-loginFrameshade")&&z("YT-loginFrameshade").parentNode.removeChild(z("YT-loginFrameshade")),z("YT-loginFramePop")&&z("YT-loginFramePop").parentNode.removeChild(z("YT-loginFramePop")),z("YT-errorTips")&&z("YT-errorTips").parentNode.removeChild(z("YT-errorTips")),z("YT-thirdLoginBox")&&z("YT-thirdLoginBox").parentNode.removeChild(z("YT-thirdLoginBox"))},showPopWindow:function(a){var b=this;b.clearPopWindow();var c,d=document.getElementsByTagName("body")[0],e=(document.documentElement.clientHeight,document.body.clientHeight,document.body.scrollTop,document.createElement("iframe"));e.src="about:blank",e.id="YT-iframeBack",e.frameBorder=0;try{iframe.document.write(""),iframe.document.clear()}catch(f){}z("YT-loginFrameshade")?c=z("YT-loginFrameshade"):(c=document.createElement("div"),c.id="YT-loginFrameshade",O(c,"YT-loginFrame-shade"),d.appendChild(c)),d.appendChild(a),a.appendChild(e),setTimeout(function(){var b=-a.clientHeight/2,c=-a.clientWidth/2;I(a.id,"marginTop",(-300>b?-300:b)+"px"),I(a.id,"marginLeft",(-450>c?-450:c)+"px"),I(a.id,"visibility","visible")},100)},setUI:function(){function a(a,b){P(a)[0]&&b&&N(P(a)[0],b)}function b(a,b){var c=document.createElement("div"),d=document.createElement("img");if(d.src=b[0],c.appendChild(d),"top"==a){c.id="YT-frameTopBanner";var e=P("YT-loginFrame-func");z("YT-loginWrap").insertBefore(c,e[0]),I("YT-frameTopBanner","position","absolute"),I("YT-frameTopBanner","top",b[1]+"px"),I("YT-frameTopBanner","left",b[2]+"px")}else"bottom"==a&&(c.id="YT-frameBottomBanner",z("YT-loginWrap").appendChild(c),I("YT-frameBottomBanner","position","absolute"),I("YT-frameBottomBanner","bottom",b[1]+"px"),I("YT-frameBottomBanner","left",b[2]+"px"))}var c=this,d=c.config.placeholders;if("login"==la){if(a("YT-l-account-tips",d.login.account),a("YT-l-password-tips",d.login.password),a("YT-l-mobile-tips",d.login.mobile),c.config.isQRlogin&&N(z("YT-QRWordTips"),c.config.qrMsg),!z("YT-forgetPsd")||!c.config.changePsdLink)return;L(z("YT-forgetPsd"),"href",c.config.changePsdLink)}else if("reg"==la){a("YT-r-eAccount-tips",d.reg.emailReg.account),a("YT-r-ePassword-tips",d.reg.emailReg.password),a("YT-r-eRepeatPsd-tips",d.reg.emailReg.repeatPassword),a("YT-r-eMobile-tips",d.reg.emailReg.mobile),a("YT-r-eValidate-tips",d.reg.emailReg.validate),a("YT-r-mAccount-tips",d.reg.mobileReg.account),a("YT-r-mPassword-tips",d.reg.mobileReg.password),a("YT-r-mRepeatPsd-tips",d.reg.mobileReg.repeatPassword),a("YT-r-mValidate-tips",d.reg.mobileReg.validate);var e=c.config.regRules[2]?'\u548c<a href="'+c.config.regRules[2]+'" target="_blank">\u7248\u6743\u58f0\u660e</a>':"";if(!z("YT-rulesBody"))return;N(z("YT-rulesBody"),'<a href="'+c.config.regRules[1]+'" target="_blank">'+c.config.regRules[0]+"</a>"+e)}var f=c.config.bannerTopImg;f&&f instanceof Array&&b("top",f);var g=c.config.bannerBottomImg;g&&g instanceof Array&&b("bottom",g),setTimeout(function(){o("YT-loginWrap")},100)},loadStyleSheet:function(){var a=this,b=document.getElementsByTagName("head")[0]||document.body,c=a.config.padding,d="";c&&c instanceof Array&&c.length>0&&(d=2==c.length?".YT-loginWrap."+a.config.size+"{ padding:"+c[0]+"px "+c[1]+"px;}":4==c.length?".YT-loginWrap."+a.config.size+"{ padding:"+c[0]+"px "+c[1]+"px "+c[2]+"px "+c[3]+"px;}":".YT-loginWrap."+a.config.size+"{ padding:"+c[0]+"px;}");var e=/url\((\S*)\)/,f=a.config.bgThemes.match(e);if(f){var g=new Image;g.src=f[1]}var h=(r(va[1],.4),r(va[1],.7),va[1]+" !important;"),i=va[0]+" !important;",j=".YT-loginWrap a:hover,.YT-third-loginbox a:hover,.YT-loginWrap .YT-change-logintype:hover,.YT-loginWrap .YT-change-logintype i,.YT-loginWrap .YT-loginFrame-foot .YT-registe-btn:hover,.YT-loginWrap .YT-loginFrame-body .YT-qr-login .YT-qr-func a:hover{color:#"+i+"}.YT-loginWrap .YT-form .YT-form-btn,.YT-third-loginbox .YT-no-bing-submit,.YT-third-loginbox .YT-thirdbox-body .YT-form .YT-form-btn,.YT-loginWrap .YT-qrLogin .YT-qr-tips-btn,.YT-loginWrap .YT-loginFrame-body .YT-qr-login .YT-qrImg-box .YT-invalid-tips .YT-form-btn,.YT-loginWrap .YT-qrLogin .YT-qr-tips-btn:hover,.YT-loginWrap .YT-form .YT-psd-strong{background-color:#"+i+"}.YT-loginWrap .YT-frame-close{color:#"+i+"}.YT-loginWrap .YT-change-logintype,.YT-loginWrap .YT-loginFrame-body .YT-qr-login .YT-qrImg-box{border-color:#"+h+"}.YT-loginWrap{background:"+a.config.bgThemes+" !important;color:"+a.config.fontColor+" !important;}.YT-loginWrap a{color:"+a.config.linkColor+" !important;}"+d;"tempMobile"==a.config.template&&(j=".YT-loginWrap .YT-tabnav-list li.active{color:#"+i+"; border-bottom:2px solid #"+i+"}.YT-loginWrap .YT-form .YT-form-btn,.YT-loginWrap .YT-switch-check.checked{background-color:#"+i+"}.YT-loginWrap .YT-switch-check.checked:before{ border-left: 6px solid #"+i+"}.YT-loginWrap .YT-check-label.checked:before{color: #"+i+"}");
var k,l=b.getElementsByTagName("style");if(0==l.length?(k=document.createElement("style"),b.appendChild(k)):k=l[0],k.type="text/css",k.media="screen",k.styleSheet?k.styleSheet.cssText+=j:k.innerHTML+=j,!document.getElementById("YT-loginFrameCss")){var m=document.createElement("link");m.id="YT-loginFrameCss",m.rel="stylesheet",m.href="tempMobile"==a.config.template?"http://account.youku.com/static-resources/css/frame_mobile.css":"mini"==a.config.size?"http://account.youku.com/static-resources/css/frame_mini.css":"https://account.youku.com/static-resources/css/frame_common.css";var n=b.getElementsByTagName("style");n.length>0?b.insertBefore(m,n[0]):b.appendChild(m)}},sendData:function(){},closeFrame:function(a){var b=this;b.clearPopWindow(),b.sendData(),clearInterval(Ba),Ba=null,clearInterval(ia),ia=null,clearInterval(ja),ja=null,a&&"function"==typeof a&&a()}},a.loginFrame=a.loginFrame||c,a.thirdConnect=a.thirdConnect||d,a.thirdPartInit=a.thirdPartInit||e,a.qrLoginFrame=a.qrLoginFrame||f;var Ga=0}(window),function(a,b,c){var d={messages:{required:" %s \u5fc5\u586b",matches:" %s \u4e0e %s \u4e0d\u76f8\u540c\u3002",cant_matches:"%s \u4e0d\u80fd\u4e0e %s \u76f8\u540c","default":"The %s field is still set to default, please change.",valid_email:" %s \u5fc5\u987b\u662f\u90ae\u7bb1\u5730\u5740\u3002",valid_mobile:" %s \u5fc5\u987b\u662f\u624b\u673a\u53f7\u3002",min_length:"\u957f\u5ea6\u8fc7\u5c0f\u3002",max_length:"\u957f\u5ea6\u8fc7\u5927\u3002",numeric:" %s \u53ea\u80fd\u662f\u6570\u5b57\u3002",integer:" %s \u53ea\u80fd\u662f\u6574\u6570\u3002",decimal:" %s \u53ea\u80fd\u662f\u5341\u8fdb\u5236\u6570\u3002",valid_psdStrong:" %s \u5f3a\u5ea6\u4e0d\u591f",valid_psd_n_s_spe:" s% \u4e0d\u80fd\u4e3a\u7eaf\u6570\u5b57\u3001\u7eaf\u5b57\u6bcd\u6216\u7eaf\u5b57\u7b26"},callback:function(a){}},e=/^(.+?)\[(.+)\]$/,f=/^[0-9]+$/,g=/^\-?[0-9]+$/,h=/^\-?[0-9]*\.?[0-9]+$/,i=function(a,b,c){this.callback=c||d.callback,this.errors=[],this.fields={},this.form=this._formByNameOrNode(a)||{},this.messages={},this.handlers={},this.conditionals={};for(var e=0,f=b.length;f>e;e++){var g=b[e];if((g.name||g.names)&&g.rules)if(g.names)for(var h=0,i=g.names.length;i>h;h++)this._addField(g,g.names[h]);else this._addField(g,g.name)}this.form.onsubmit;this.form.onsubmit=function(){return!1}},j=function(a,b){var c;{if(!(a.length>0)||"radio"!==a[0].type&&"checkbox"!==a[0].type)return a[b];for(c=0,elementLength=a.length;c<elementLength;c++)if(a[c].checked)return a[c][b]}};i.prototype.setMessage=function(a,b){return this.messages[a]=b,this},i.prototype.registerCallback=function(a,b){return a&&"string"==typeof a&&b&&"function"==typeof b&&(this.handlers[a]=b),this},i.prototype.registerConditional=function(a,b){return a&&"string"==typeof a&&b&&"function"==typeof b&&(this.conditionals[a]=b),this},i.prototype._formByNameOrNode=function(a){return"object"==typeof a?a:b.forms[a]},i.prototype._addField=function(a,b){this.fields[b]={name:b,display:a.display||b,rules:a.rules,depends:a.depends,errorMsg:a.errorMsg,id:null,element:null,type:null,value:null,checked:null}},i.prototype._validateForm=function(a){this.errors=[];for(var b in this.fields)if(this.fields.hasOwnProperty(b)){var d=this.fields[b]||{},e=this.form[d.name];e&&e!==c&&(d.id=j(e,"id"),d.element=e,d.type=e.length>0?e[0].type:e.type,d.value=j(e,"value"),d.checked=j(e,"checked"),d.depends&&"function"==typeof d.depends?d.depends.call(this,d)&&this._validateField(d):d.depends&&"string"==typeof d.depends&&this.conditionals[d.depends]?this.conditionals[d.depends].call(this,d)&&this._validateField(d):this._validateField(d))}return"function"==typeof this.callback&&this.callback(this.errors,a),this.errors.length>0,!0},i.prototype._validateField=function(a){for(var b=a.rules.split("|"),f=a.rules.indexOf("required"),g=!a.value||""===a.value||a.value===c,h=(a.ajaxCheck,0),i=b.length;i>h;h++){var j=b[h],k=null,l=!1,m=e.exec(j);if((-1!==f||-1!==j.indexOf("!callback_")||!g)&&(m&&(j=m[1],k=m[2]),"!"===j.charAt(0)&&(j=j.substring(1,j.length)),"function"==typeof this._hooks[j]?this._hooks[j].apply(this,[a,k])||(l=!0):"callback_"===j.substring(0,9)&&(j=j.substring(9,j.length),"function"==typeof this.handlers[j]&&this.handlers[j].apply(this,[a.value,k,a])===!1&&(l=!0)),l)){var n=this.messages[a.name+"."+j]||this.messages[j]||d.messages[j],o="An error has occurred with the "+a.display+" field.";n&&(o=n.replace("%s",a.display),k&&(o=o.replace("%s",this.fields[k]?this.fields[k].display:k)),a.errorMsg&&(o=a.errorMsg[j])),this.errors.push({id:a.id,element:a.element,name:a.name,message:o,rule:j});break}}},i.prototype._hooks={required:function(a){var b=a.value;return"checkbox"===a.type||"radio"===a.type?a.checked===!0:null!==b&&""!==b},"default":function(a,b){return a.value!==b},matches:function(a,b){var c=this.form[b];return c?a.value===c.value:!1},cant_matches:function(a,b){var c=this.form[b];return c?a.value!==c.value:!0},valid_psdStrong:function(a){return YTL_CONFIG.psdtest.test(a.value)},valid_psd_n_s_spe:function(a){return YTL_CONFIG.numberReg.test(a.value)||YTL_CONFIG.codeReg.test(a.value)||YTL_CONFIG.specialReg.test(a.value)?!1:!0},valid_email:function(a){return YTL_CONFIG.emailReg.test(a.value)},valid_mobile:function(a,c){var d="CN",e=b.getElementById("YT-countryRegin");e&&(d=e.value);var f=new RegExp(YTL_CONFIG.allMobileRegExp[d]);return f.test(a.value)},min_length:function(a,b){return f.test(b)?a.value.length>=parseInt(b,10):!1},max_length:function(a,b){return f.test(b)?a.value.length<=parseInt(b,10):!1},numeric:function(a){return f.test(a.value)},integer:function(a){return g.test(a.value)},decimal:function(a){return h.test(a.value)}},a.FormValidator=i}(window,document);